#!python
import os
Import('cbenv')

cbenv.add_include_dir('.')

# thirdparty env
env_thirdparty = cbenv.Clone()
env_thirdparty.Append(CPPDEFINES=[])    # predefined macros
env_thirdparty.Append(LIBPATH=[])       # static lib dir
env_thirdparty.Append(LIBS=[])          # static libs

# source files
Export('env_thirdparty')
env_thirdparty.sources = []

if env_thirdparty['platform'] == "osx":
    pass
elif env_thirdparty['platform'] in ('x11', 'linux'):
    pass
elif env_thirdparty['platform'] == "windows":
    env_thirdparty.sources += [
        File('dlfcn-win32/dlfcn.c')
    ]
    pass

cbenv.sources += env_thirdparty.sources

## make library
#for src in env_thirdparty.sources:
#    cbenv.add_ide_sources(src)
#    
#lib = env_thirdparty.StaticLibrary(
#        'bin/' + 'thirdparty' + env_thirdparty['out_suffix'],
#        env_thirdparty.sources)
#cbenv.Prepend(LIBS=[lib])
