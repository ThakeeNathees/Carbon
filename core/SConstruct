#!python
import os
Import('cbenv')

# project includes
cbenv.add_include_dir('var.h')
cbenv.add_include_dir('.')

# core env
env_core = cbenv.Clone()
env_core.Append(CPPDEFINES=[]) # predefined macros
env_core.Append(CPPPATH=[])    # include files
env_core.Append(LIBPATH=[])    # static lib dir
env_core.Append(LIBS=[])       # static libs
cbenv.core_source = []           # source files

# collect obj files
cbenv.core_source += [
    'var.h/var.cpp',
    Glob('*.cpp'),
]
SConscript('io/SConstruct')

# make library
lib = env_core.StaticLibrary(
        'bin/' + 'core' + env_core['out_suffix'], 
        cbenv.core_source
    )
cbenv.Prepend(LIBS=[lib])